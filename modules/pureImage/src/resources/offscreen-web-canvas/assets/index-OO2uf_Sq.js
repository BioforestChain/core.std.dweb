(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const h=Worker;class c extends EventTarget{constructor(){super(...arguments),this.closed=!1,this.beforeStart=[]}start(){const r=this.beforeStart;if(r){this.beforeStart=void 0;for(const[s,t]of r)this.dispatchMessageEvent(s,t);this.addEventListener=super.addEventListener.bind(this)}}postMessage(r,s){if(!this.closed){if(this.remote.beforeStart){this.remote.beforeStart.push([r,s]);return}this.remote.dispatchMessageEvent(r,s)}}dispatchMessageEvent(r,s){const t=s?.filter(e=>e instanceof MessagePort)??[];this.dispatchEvent(new MessageEvent("message",{data:r,ports:t}))}addEventListener(r,s,t){super.addEventListener(r,s,t),this.start()}close(){this.closed||(this.closed=!0,this.remote.close())}}class d{constructor(r,s){this.mockChannel=(()=>{const o=new c,i=new c;return o.remote=i,i.remote=o,[o,i]})(),this.toWorkerPort=this.mockChannel[0],this.toMainPort=this.mockChannel[1],this.postMessage=this.toWorkerPort.postMessage.bind(this.toWorkerPort),this.addEventListener=this.toWorkerPort.addEventListener.bind(this.toWorkerPort);const t=(Date.now()+Math.random()).toString(36),e=this.script=document.createElement("script");debugger;e.dataset.workerId=t,e.type=s?.type??"module",s?.name&&(e.title=s.name),e.async=!0,document.head.appendChild(e),e.src=r,Object.assign(window,{Worker:h,[t]:this})}}function u(n){{const r=n;let s=!1;n.transferControlToOffscreen=()=>{if(s)return r;s=!0;const t=document.createElement("div");return t.appendChild(n),document.body.appendChild(t),t.style.pointerEvents="none",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.width="0",t.style.height="0",t.style.opacity="0",delete n.transferControlToOffscreen,r},window.Worker.valueOf()!==d&&Object.assign(window,{Worker:d})}return n.transferControlToOffscreen()}function p(n){return new Worker("/assets/worker-BtiaC9xd.js",{type:"module",name:n?.name})}const f=Array.from({length:3},()=>{const n=document.createElement("canvas");return u(n)}),l=new p,a=new URLSearchParams(location.search);l.postMessage({canvasList:f,width:parseInt(a.get("width")||"128"),height:parseInt(a.get("height")||"128"),wsUrl:a.get("channel"),proxyUrl:a.get("proxy")},f);Object.assign(self,{worker:l});
